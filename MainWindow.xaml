<Window
    x:Class="displaymux.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="DisplayMux">

    <Grid Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="16,0,0,0">

            <Image Source="/Assets/Square44x44Logo.scale-200.png" 
           Width="24" 
           Height="24" 
           Margin="0,0,12,0" 
           VerticalAlignment="Center"/>

            <TextBlock Text="DisplayMux" 
               FontSize="12" 
               VerticalAlignment="Center" 
               FontWeight="Light" 
               CharacterSpacing="50"
               Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
        </StackPanel>

        <Grid Grid.Row="1" Padding="24,12,24,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" VerticalAlignment="Center">

                <TextBlock Text="输入源配置" 
               Style="{StaticResource TitleTextBlockStyle}" 
               FontSize="28" 
               FontWeight="SemiBold" 
               CharacterSpacing="50"/>

                <TextBlock Text="基于 DDC/CI 协议的信号接管" 
               Style="{StaticResource CaptionTextBlockStyle}" 
               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
               Margin="0,2,0,0"
               CharacterSpacing="20"/>
            </StackPanel>

            <Button Grid.Column="1" Click="OnRefreshClick" Style="{StaticResource DefaultButtonStyle}" 
                    Width="40" Height="40" CornerRadius="4" ToolTipService.ToolTip="刷新列表">
                <FontIcon Glyph="&#xE72C;" FontSize="16"/>
            </Button>
        </Grid>

        <ListView x:Name="MonitorListView" Grid.Row="2" SelectionMode="None" Padding="24,0,24,24">
            
            <ListView.ItemContainerTransitions>
                <TransitionCollection>
                    <EntranceThemeTransition FromVerticalOffset="20" IsStaggeringEnabled="True"/>
                </TransitionCollection>
            </ListView.ItemContainerTransitions>

            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}" 
                          CornerRadius="8" Padding="24,20" Margin="0,0,0,16" BorderThickness="1" 
                          BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
                        
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>

                        <FontIcon Grid.Column="0" Glyph="&#xE7F4;" FontSize="32" Opacity="0.8" 
                                  VerticalAlignment="Center" Margin="0,0,20,0"/>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="0,0,20,0">
                            <TextBlock Text="{Binding Name}" Style="{StaticResource SubtitleTextBlockStyle}" FontWeight="Bold"/>
                            
                            <TextBlock Style="{StaticResource CaptionTextBlockStyle}" Margin="0,6,0,0">
                                <Run Text="当前输入: " Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <Run Text="{Binding CurrentInputName}" 
                                     Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" 
                                     FontWeight="SemiBold"/>
                            </TextBlock>
                        </StackPanel>

                        <ComboBox x:Name="InputSelector" Grid.Column="2" VerticalAlignment="Center" 
                                  SelectedIndex="0" Margin="0,0,12,0" HorizontalAlignment="Stretch">
                            <ComboBoxItem Content="DisplayPort" Tag="15"/>
                            <ComboBoxItem Content="HDMI 1" Tag="17"/>
                            <ComboBoxItem Content="HDMI 2" Tag="18"/>
                        </ComboBox>

                        <Button Grid.Column="3" Content="应用" HorizontalAlignment="Stretch" 
                                Click="OnApplyClick" Tag="{Binding}" Style="{StaticResource AccentButtonStyle}"/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <Grid Grid.Row="3" Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}" Padding="24,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" x:Name="StatusText" 
                       Text="准备就绪" 
                       FontSize="12" 
                       Opacity="0.5" 
                       VerticalAlignment="Center"/>

            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Opacity="0.4">
                <TextBlock Text="Designed by " FontSize="10" FontWeight="Normal"/>
                <TextBlock Text="zeer" FontSize="10" FontWeight="SemiBold" Margin="2,0,0,0"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>